<!DOCTYPE html><html><head><title>Light Control</title><meta name="viewport"content="width=device-width"></head><body id="c"style="margin:0;padding:0;height:100%;background:#656565;"><div style="width:320px;height:480px;margin:auto;padding-top:5px;"><div style="margin-left:10px;margin-top:10px;width:300px;display:table;"><canvas id="cR"width="248"height="378"style="border:1px solid white;outline:1px solid black;float:left;"></canvas><div id="vS"style="float:left;margin-left: 10px;"></div><div id="vT"style="display:none;"></div></div><div style="border:1px solid black;width:300px;height:50px;margin-top:20px;margin-left:10px;"><button id="sC"style="width:300px;height:50px;border:1px solid white;background:#353535;color:white;font:20px Verdana;">Confirm New Color</button></div><iframe name="ifr"style="display:none;"width="0"height="0"></iframe></div><script type="text/javascript">var BG="#FFF";var l=15,R=0,G=0,B=0;function zoPad(num,numz){var n=Math.abs(num);var z=Math.max(0,numz-Math.floor(n).toString().length);var zt=Math.pow(10,z).toString().substr(1);if(num<0){zt='-'+zt;}return zt+n;}function sC1(){link('/?pinM356='+zoPad(R,3)+ zoPad(G,3)+ zoPad(B,3),null,'GET','ifr','submitColorForm');};function onLoad(){var mB="#353535";var mF=BG;cSA[0]=new cSlider("vS","vT",l,"vertically",40,382 ,0,100,false,mB,mF);var vS=document.getElementById("vS");var vC=document.getElementById("vC");var vT=document.getElementById("vT");vT.addEventListener("DOMNodeInserted",refreshColorPicker,false);refreshColorPicker();var cR=document.getElementById("cR");cR.addEventListener("click",pickColor,false);var sC=document.getElementById("sC");sC.addEventListener("click",sC1,false);};function link(url,params,method,target,fName){method=method ||"get";var f=document.createElement("form");f._submit_function_=f.submit;f.setAttribute("method",method);f.setAttribute("action",url);f.setAttribute("name",fName);if(target!=undefined){f.setAttribute("target",target);}if(params instanceof Object){for(var k in params){var hF=document.createElement("inp");hF.setAttribute("type","hidden");hF.setAttribute("name",k);hF.setAttribute("value",params[k]);f.appendChild(hF);}}var uP=getUrlrs(url);if(uP instanceof Object){for(var k in uP){var hF2=document.createElement("inp");hF2.setAttribute("type","hidden");hF2.setAttribute("name",k);hF2.setAttribute("value",uP[k]);f.appendChild(hF2);}}if(params instanceof Array){for(var i=0;i<params.length;i++){var tA=params[i];var inp=$('<inp type="hidden">');inp.attr({'name': tA[0],'value': tA[1]});f.append(inp);}}document.body.appendChild(f);f.submit();}function getUrlrs(url){var va={};var par=url.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,k,value){va[k]=value;});return va;}var eT=new Array();function preventEventSpam(func,timeoutspeed,id){setTimeout(function(){if(eT[id]>1){eT[id]--;}else{eT[id]=0;func();}},timeoutspeed);eT[id]++;}document.addEventListener("DOMContentLoaded",onLoad,true);function refreshColorPicker(){preventEventSpam(function(){var vS=document.getElementById("vS");var vT=document.getElementById("vT");var el=document.getElementById("cR");var ctx=el.getContext('2d');var hM=378,sM=248,vM=100,vV=100-l;for(var hV=0;hV<=hM;hV++){for(var sV=0;sV<=sM;sV++){var rgb=hsvToRgb(hV,Math.floor(sV/2),vV);ctx.fillStyle="rgb("+Math.floor(rgb.r)+","+Math.floor(rgb.g)+","+Math.floor(rgb.b)+")";ctx.fillRect(sV,hV ,1,1);}}},200,"0");};function findPos(obj){var cl=0,ct=0;if(obj.offsetParent){do{cl+=obj.offsetLeft;ct+=obj.offsetTop;}while(obj=obj.offsetParent);return{x: cl,y: ct};}return undefined;}function pickColor(e){var pos=findPos(this);var x=e.pageX-pos.x;var y=e.pageY-pos.y;var c=document.getElementById("c");var cR=document.getElementById("cR");var cRCTX=cR.getContext('2d');var data=cRCTX.getImageData(x,y,1,1).data;R=data[0];G=data[1];B=data[2];var cSt="rgb("+data[0]+","+data[1]+","+data[2]+")";BG=cSt;onLoad();};var maM=Math.min;var mathM=Math.max;function hsvToRgb(h,s,v){h=bound01(h,360)* 6;s=bound01(s,100);v=bound01(v,100);var i=Math.floor(h),f=h-i,p=v *(1-s),q=v *(1-f*s),t=v *(1 -(1-f)* s),mod=i % 6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r: r*255,g: g*255,b: b*255};}function isOnePointzo(n){return typeof n=="string"&&n.indexOf('.')!=-1&&parseFloat(n)===1;}function bound01(n,max){if(isOnePointzo(n)){n="100%";}var pP=isPercentage(n);n=maM(max,mathM(0,parseFloat(n)));if(pP){n=parseInt(n*max,10)/ 100;}if((Math.abs(n-max)< 0.1)){return 1;}return(n % max)/ parseFloat(max);}function isPercentage(n){return typeof n==="string"&&n.indexOf('%')!=-1;}function setCenter(){var height=(getARect("areaId")).height;var width=(getARect("areaId")).width;if(height>window.innerHeight){height=20;}else{height=(window.innerHeight-height)/2;}if(width>window.innerWidth){width=20;}else{width=(window.innerWidth-width)/2;}document.getElementById("JsCenter").innerHTML="<style type='text/css'>.myArea{pos: absolute;margin-top:"+(height)+"px;margin-left:"+(width)+"px;</style>";}function setResizeEvent(){window.onresize=setCenter;}var gYp=0;var gYp=0;var cSA=new Array();var cuS=0;var iMO=true;document.onmousemove=getMouseXY;document.onmouseup=setCurrentSliderNull;cSlider=function(myDivName,outDivName,cStartValue,cAlign,cWidth,cHeight,cMinValue,cMaxValue,cInverse,cBackgroundColor,cForeground){this.canvasName=myDivName+"Canvas";this.outDivName=outDivName;this.cWidth=cWidth;this.cHeight=cHeight;this.cMinValue=cMinValue;this.cMaxValue=cMaxValue;this.cInverse=cInverse;this.isMouseDown=false;this.isXpos=false;this.isYpos=false;this.outLine="#000";this.innerOutLine="#FFF";this.cBackgroundColor=cBackgroundColor;this.cForeground=cForeground;this.cStartValue=cStartValue;this.value=this.cStartValue;document.getElementById(myDivName).innerHTML="<canvas id="+this.canvasName+" width='"+cWidth+"' height='"+cHeight+"' onmouseover='cMouseOver(this)' onmouseout='cMouseOut(this)' onmousedown='cMousedown(this)' onmouseup='cMouseUp(this)'><a>braucht HTML5</a></canvas>";var el=document.getElementById(this.canvasName);this.canvasContextObj=el.getContext('2d');cuS=this;if(cAlign=="vertically"){this.isXpos=false;this.isYpos=true;this.lenght=cHeight;cDrawVerticalSlider(this.cStartValue*this.lenght/100);}cCalcValue(this.value);};function cMouseOver(obj){}function cMouseOut(obj){}function cMousedown(obj){for(var i=0;i<cSA.length;i++){if(obj.id==cSA[i].canvasName){cuS=cSA[i];}}cuS.isMouseDown=true;cDraw();}function cMouseUp(obj){cuS.isMouseDown=false;l=Math.abs(100-document.getElementById("vT").textContent);}function cDraw(){if(cuS!=0&&cuS.isMouseDown){if(cuS.isXpos){var offsetLeft=(getRect(cuS.canvasName)).left;if((cuS.cWidth+offsetLeft)>=gYp&&gYp>=offsetLeft){cDrawHorizantalSlider((gYp-offsetLeft));cCalcValue((gYp-offsetLeft));}if((cuS.cWidth+offsetLeft)< gYp){cDrawVerticalSlider((cuS.cWidth));cCalcValue((cuS.cWidth));}if(offsetLeft>gYp){cDrawVerticalSlider(0);cCalcValue(0);}}if(cuS.isYpos){var offsetTop=(getRect(cuS.canvasName)).top;if((cuS.cHeight+offsetTop)>=gYp&&gYp>=offsetTop){cDrawVerticalSlider((gYp-offsetTop));cCalcValue((gYp-offsetTop));}if((cuS.cHeight+offsetTop)< gYp){cDrawVerticalSlider((cuS.cHeight));cCalcValue((cuS.cHeight));}if(offsetTop>gYp){cDrawVerticalSlider(0);cCalcValue(0);}}}}function cCalcValue(value){value=(value/cuS.lenght);value *=(cuS.cMaxValue-cuS.cMinValue);value+=cuS.cMinValue;if(!cuS.cInverse){value=cuS.cMaxValue -(value-cuS.cMinValue);}value=Math.floor((value*100))/100;if(cuS.outDivName!=0){document.getElementById(cuS.outDivName).innerHTML=value;}cuS.value=value;}function cDrawVerticalSlider(value){cuS.canvasContextObj.fillStyle=cuS.cForeground;cuS.canvasContextObj.fillRect(0,0,cuS.cWidth,value);cuS.canvasContextObj.fillStyle=cuS.cBackgroundColor;cuS.canvasContextObj.fillRect(0,value,cuS.cWidth,cuS.cHeight);cuS.canvasContextObj.beginPath();cuS.canvasContextObj.rect(0.5,0.5,cuS.cWidth-1,cuS.cHeight-1);cuS.canvasContextObj.lineWidth=1;cuS.canvasContextObj.strokeStyle=cuS.outLine;cuS.canvasContextObj.stroke();cuS.canvasContextObj.beginPath();cuS.canvasContextObj.rect(1.5,1.5,cuS.cWidth-3,cuS.cHeight-3);cuS.canvasContextObj.lineWidth=1;cuS.canvasContextObj.strokeStyle=cuS.innerOutLine;cuS.canvasContextObj.stroke();}function getMouseXY(obj){gYp=obj.pageX;gYp=obj.pageY;cDraw();}function setCurrentSliderNull(){if(iMO){for(var i=0;i<cSA.length;i++){cSA[i].isMouseDown=false;}cuS=0;}}function getRect(o){var r={top:0,left:0,width:0,height:0};if(!o)return r;else if(typeof o=='string')o=document.getElementById(o);if(typeof o!='object')return r;if(typeof o.offsetTop!='undefined'){r.height=o.offsetHeight;r.width=o.offsetWidth;r.left=r.top=0;while(o&&o.tagName!='BODY'){r.top+=parseInt(o.offsetTop);r.left+=parseInt(o.offsetLeft);o=o.offsetParent;}}return r;}function setCenter(){var height=(getARect("areaId")).height;var width=(getARect("areaId")).width;if(height>window.innerHeight){height=20;}else{height=(window.innerHeight-height)/2;}if(width>window.innerWidth){width=20;}else{width=(window.innerWidth-width)/2;}document.getElementById("JsCenter").innerHTML="<style type='text/css'>.myArea{pos: absolute;margin-top:"+(height)+"px;margin-left:"+(width)+"px;</style>";}function setResizeEvent(){window.onresize=setCenter;}function getARect(o){var r={top:0,left:0,width:0,height:0};if(!o)return r;else if(typeof o=='string')o=document.getElementById(o);if(typeof o!='object')return r;if(typeof o.offsetTop!='undefined'){r.height=o.offsetHeight;r.width=o.offsetWidth;r.left=r.top=0;while(o&&o.tagName!='BODY'){r.top+=parseInt(o.offsetTop);r.left+=parseInt(o.offsetLeft);o=o.offsetParent;}}return r;}</script></body></html>